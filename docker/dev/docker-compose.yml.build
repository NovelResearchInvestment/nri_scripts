version: '3.9'

services:

  centos-dev:
    build:
      context: './Dockerfile'
      dockerfile: centos_dev.dockerfile
    container_name: centos-dev
    tty: true
    working_dir: '/root'
    extra_hosts:
      - "raw.githubusercontent.com:199.232.28.133"

  influxdb:
    build:
      context: './Dockerfile'
      dockerfile: influxdb.dockerfile
    container_name: influxdb
    working_dir: /root
    tty: true
    extra_hosts:
      - "raw.githubusercontent.com:199.232.28.133"
    depends_on:
      - centos-dev

  postgres:
    build:
      context: './Dockerfile'
      dockerfile: postgres.dockerfile
    container_name: postgres
    working_dir: /root
    tty: true
    extra_hosts:
      - "raw.githubusercontent.com:199.232.28.133"
    depends_on:
      - centos-dev

  services:
    build:
      context: './Dockerfile'
      dockerfile: services.dockerfile
    container_name: services
    working_dir: /root
    tty: true
    extra_hosts:
      - "raw.githubusercontent.com:199.232.28.133"
    depends_on:
      - centos-dev
    links:
      - influxdb
      - postgres

  ubuntu-dev:
    build:
      context: './Dockerfile'
      dockerfile: ubuntu_dev.dockerfile
    container_name: ubuntu-dev
    working_dir: /root
    tty: true
    extra_hosts:
      - "raw.githubusercontent.com:199.232.28.133"

  jupyterhub:
    build:
      context: './Dockerfile'
      dockerfile: jupyterhub.dockerfile
    container_name: jupyterhub
    working_dir: /root
    tty: true
    extra_hosts:
      - "raw.githubusercontent.com:199.232.28.133"
    depends_on:
      - ubuntu-dev
    links:
      - influxdb
      - postgres
